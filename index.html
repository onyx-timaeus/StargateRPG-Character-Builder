<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stargate RPG Character Builder</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .scrollbar-thin {
            scrollbar-width: thin;
            scrollbar-color: #4a5568 #2d3748;
        }
        .scrollbar-thin::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        .scrollbar-thin::-webkit-scrollbar-track {
            background: #2d3748;
            border-radius: 4px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 4px;
        }
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #718096;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const StargateCharacterEditor = () => {
            // Character state
            const [character, setCharacter] = useState({
                name: '',
                race: '',
                subrace: '',
                abilityChoice: '',
                origins: [],
                originChoices: {},
                raceChoices: {},
                class: '',
                level: 1,
                classFeats: [],
                abilityScoreImprovements: {},
                abilityScores: {
                    strength: 10,
                    dexterity: 10,
                    constitution: 10,
                    intelligence: 10,
                    wisdom: 10,
                    charisma: 10
                },
                hp: 0,
                maxHp: 0,
                determinationPoints: 0,
                armorClass: 10,
                speed: 6,
                initiative: 0,
                moxie: 0,
                proficiencies: {
                    armor: [],
                    weapons: [],
                    tools: [],
                    saves: [],
                    skills: []
                },
                bonusFeats: []
            });

            const [showClassFeats, setShowClassFeats] = useState(true);
            const [showClassAbilities, setShowClassAbilities] = useState(true);
            const [attackSpecialistChoice, setAttackSpecialistChoice] = useState('');

            // Field Hack feats for Scout class
            const fieldHackFeats = [
                { name: 'Camouflage', requirements: 'Stealth', description: 'Create camouflage granting advantage on Stealth in natural terrain' },
                { name: 'Camp Security', requirements: 'Perception', description: 'Set up camp alarms, advantage on Perception during rest' },
                { name: 'Foraging', requirements: 'Survival', description: 'Find food/water for 1d4+Wis mod people per day' },
                { name: 'Hide Tracks', requirements: 'Stealth', description: 'Increase DC to track your party by +5' },
                { name: 'Ranger Tricks', requirements: 'Nature', description: 'Leave false trails, create natural traps (1d6 damage)' },
                { name: 'Ration Optimization', requirements: 'Survival', description: 'Make rations last 50% longer' },
                { name: 'Rope Tricks', requirements: 'Athletics', description: 'Advantage on Athletics checks involving ropes and climbing' },
                { name: 'Tracking', requirements: 'Survival', description: 'Track creatures, determine numbers and time passed' },
                { name: 'Xenosurvival', requirements: 'Science', description: 'Identify alien flora/fauna as safe or dangerous' }
            ];

            // Class-specific feats by type
            const classFeatsByType = {
                inspiration: [
                    { name: 'Calm and Collected', description: 'During long rest, choose Int/Wis/Cha. Inspired characters gain advantage on chosen save' },
                    { name: 'Clear Focus', description: 'During long rest, choose a skill. Inspired characters gain advantage on that skill' },
                    { name: 'Coordinated Fire', description: 'After you hit, bonus action to grant inspired ally advantage on next attack vs same target' },
                    { name: 'Defensive Motivation', description: 'Inspired characters gain +1 AC' },
                    { name: 'Enduring Inspirations', description: 'At combat start, inspired characters gain tension die worth of Inspire HP' },
                    { name: 'Grim Resolve', description: 'When inspired character loses last Inspire HP, gain resistance to physical damage until next turn' },
                    { name: 'Hard Days Night', description: 'Inspired characters reduce exhaustion from environment/exertion by 1 level (min 1)' },
                    { name: 'Quippy Comebacks', description: 'Once per Diplomatic Function, inspired characters halve DP loss from failed checks' },
                    { name: 'Skillful Explanations', description: 'Once per short rest, allow inspired character to re-roll failed skill check you are proficient in' }
                ],
                modification: [
                    { name: 'Armorer', description: 'During long rest, grant one armor +1 AC until next rest' },
                    { name: 'Chem Thrower', description: 'During long rest, grant line/cone weapon +5m range' },
                    { name: 'Comms Tech', description: 'Team radio range 20km (not 5km), balloon duration 15d6 hours' },
                    { name: 'Grenadier', description: 'Your grenades deal +1d6 damage' },
                    { name: 'Longarm Calibrations', descri
